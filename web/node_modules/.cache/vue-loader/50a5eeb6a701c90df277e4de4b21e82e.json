{"remainingRequest":"/home/hoang/laravel-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hoang/laravel-vue/src/components/LoginForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hoang/laravel-vue/src/components/LoginForm.vue","mtime":1618134042055},{"path":"/home/hoang/laravel-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hoang/laravel-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hoang/laravel-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hoang/laravel-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEVycm9yIH0gZnJvbSAiQC91dGlscy9oZWxwZXJzIjsKaW1wb3J0IEJhc2VCdG4gZnJvbSAiQC9jb21wb25lbnRzL0Jhc2VCdG4iOwppbXBvcnQgQmFzZUlucHV0IGZyb20gIkAvY29tcG9uZW50cy9CYXNlSW5wdXQiOwppbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9BdXRoU2VydmljZSI7CmltcG9ydCBGbGFzaE1lc3NhZ2UgZnJvbSAiQC9jb21wb25lbnRzL0ZsYXNoTWVzc2FnZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luVmlldyIsCiAgY29tcG9uZW50czogewogICAgQmFzZUJ0biwKICAgIEJhc2VJbnB1dCwKICAgIEZsYXNoTWVzc2FnZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogbnVsbCwKICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIGVycm9yOiBudWxsLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvZ2luKCkgewogICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICB9OwogICAgICB0aGlzLmVycm9yID0gbnVsbDsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBBdXRoU2VydmljZS5sb2dpbihwYXlsb2FkKTsKICAgICAgICBjb25zdCBhdXRoVXNlciA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJhdXRoL2dldEF1dGhVc2VyIik7CiAgICAgICAgaWYgKGF1dGhVc2VyKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYXV0aC9zZXRHdWVzdCIsIHsgdmFsdWU6ICJpc05vdEd1ZXN0IiB9KTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvZGFzaGJvYXJkIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGVycm9yID0gRXJyb3IoCiAgICAgICAgICAgICJVbmFibGUgdG8gZmV0Y2ggdXNlciBhZnRlciBsb2dpbiwgY2hlY2sgeW91ciBBUEkgc2V0dGluZ3MuIgogICAgICAgICAgKTsKICAgICAgICAgIGVycm9yLm5hbWUgPSAiRmV0Y2ggVXNlciI7CiAgICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5lcnJvciA9IGdldEVycm9yKGVycm9yKTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["LoginForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <form @submit.prevent=\"login\">\n    <BaseInput\n      type=\"email\"\n      label=\"Email\"\n      name=\"email\"\n      v-model=\"email\"\n      autocomplete=\"email\"\n      placeholder=\"luke@jedi.com\"\n      class=\"mb-2\"\n    />\n    <BaseInput\n      type=\"password\"\n      label=\"Password\"\n      name=\"password\"\n      v-model=\"password\"\n      class=\"mb-4\"\n    />\n    <div class=\"flex justify-between\">\n      <BaseBtn type=\"submit\" text=\"Login\" />\n      <router-link to=\"/forgot-password\" class=\"text-sm base-link\">\n        Forgot your password?\n      </router-link>\n    </div>\n    <FlashMessage :error=\"error\" />\n  </form>\n</template>\n\n<script>\nimport { getError } from \"@/utils/helpers\";\nimport BaseBtn from \"@/components/BaseBtn\";\nimport BaseInput from \"@/components/BaseInput\";\nimport AuthService from \"@/services/AuthService\";\nimport FlashMessage from \"@/components/FlashMessage\";\n\nexport default {\n  name: \"LoginView\",\n  components: {\n    BaseBtn,\n    BaseInput,\n    FlashMessage,\n  },\n  data() {\n    return {\n      email: null,\n      password: null,\n      error: null,\n    };\n  },\n  methods: {\n    async login() {\n      const payload = {\n        email: this.email,\n        password: this.password,\n      };\n      this.error = null;\n      try {\n        await AuthService.login(payload);\n        const authUser = await this.$store.dispatch(\"auth/getAuthUser\");\n        if (authUser) {\n          this.$store.dispatch(\"auth/setGuest\", { value: \"isNotGuest\" });\n          this.$router.push(\"/dashboard\");\n        } else {\n          const error = Error(\n            \"Unable to fetch user after login, check your API settings.\"\n          );\n          error.name = \"Fetch User\";\n          throw error;\n        }\n      } catch (error) {\n        this.error = getError(error);\n      }\n    },\n  },\n};\n</script>\n"]}]}