{"remainingRequest":"/home/hoang/Manager-Village1/web/node_modules/babel-loader/lib/index.js!/home/hoang/Manager-Village1/web/node_modules/eslint-loader/index.js??ref--13-0!/home/hoang/Manager-Village1/web/src/store/modules/Auth.js","dependencies":[{"path":"/home/hoang/Manager-Village1/web/src/store/modules/Auth.js","mtime":1618134042079},{"path":"/home/hoang/Manager-Village1/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hoang/Manager-Village1/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hoang/Manager-Village1/web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2hvYW5nL01hbmFnZXItVmlsbGFnZTEvd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCB7IGdldEVycm9yIH0gZnJvbSAiQC91dGlscy9oZWxwZXJzIjsKaW1wb3J0IEF1dGhTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvQXV0aFNlcnZpY2UiOwpleHBvcnQgdmFyIG5hbWVzcGFjZWQgPSB0cnVlOwpleHBvcnQgdmFyIHN0YXRlID0gewogIHVzZXI6IG51bGwsCiAgbG9hZGluZzogZmFsc2UsCiAgZXJyb3I6IG51bGwKfTsKZXhwb3J0IHZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1VTRVI6IGZ1bmN0aW9uIFNFVF9VU0VSKHN0YXRlLCB1c2VyKSB7CiAgICBzdGF0ZS51c2VyID0gdXNlcjsKICB9LAogIFNFVF9MT0FESU5HOiBmdW5jdGlvbiBTRVRfTE9BRElORyhzdGF0ZSwgbG9hZGluZykgewogICAgc3RhdGUubG9hZGluZyA9IGxvYWRpbmc7CiAgfSwKICBTRVRfRVJST1I6IGZ1bmN0aW9uIFNFVF9FUlJPUihzdGF0ZSwgZXJyb3IpIHsKICAgIHN0YXRlLmVycm9yID0gZXJyb3I7CiAgfQp9OwpleHBvcnQgdmFyIGFjdGlvbnMgPSB7CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgIHJldHVybiBBdXRoU2VydmljZS5sb2dvdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgY29tbWl0KCJTRVRfVVNFUiIsIG51bGwpOwogICAgICBkaXNwYXRjaCgic2V0R3Vlc3QiLCB7CiAgICAgICAgdmFsdWU6ICJpc0d1ZXN0IgogICAgICB9KTsKICAgICAgaWYgKHJvdXRlci5jdXJyZW50Um91dGUubmFtZSAhPT0gImxvZ2luIikgcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvbG9naW4iCiAgICAgIH0pOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbW1pdCgiU0VUX0VSUk9SIiwgZ2V0RXJyb3IoZXJyb3IpKTsKICAgIH0pOwogIH0sCiAgZ2V0QXV0aFVzZXI6IGZ1bmN0aW9uIGdldEF1dGhVc2VyKF9yZWYyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICBjb21taXQoIlNFVF9MT0FESU5HIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIEF1dGhTZXJ2aWNlLmdldEF1dGhVc2VyKCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGNvbW1pdCgiU0VUX1VTRVIiLCByZXNwb25zZS5kYXRhLmRhdGEpOwogICAgICAgICAgICAgIGNvbW1pdCgiU0VUX0xPQURJTkciLCBmYWxzZSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuZGF0YS5kYXRhKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgY29tbWl0KCJTRVRfTE9BRElORyIsIGZhbHNlKTsKICAgICAgICAgICAgICBjb21taXQoIlNFVF9VU0VSIiwgbnVsbCk7CiAgICAgICAgICAgICAgY29tbWl0KCJTRVRfRVJST1IiLCBnZXRFcnJvcihfY29udGV4dC50MCkpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxMV1dKTsKICAgIH0pKSgpOwogIH0sCiAgc2V0R3Vlc3Q6IGZ1bmN0aW9uIHNldEd1ZXN0KGNvbnRleHQsIF9yZWYzKSB7CiAgICB2YXIgdmFsdWUgPSBfcmVmMy52YWx1ZTsKICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZ3Vlc3QiLCB2YWx1ZSk7CiAgfQp9OwpleHBvcnQgdmFyIGdldHRlcnMgPSB7CiAgYXV0aFVzZXI6IGZ1bmN0aW9uIGF1dGhVc2VyKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUudXNlcjsKICB9LAogIGlzQWRtaW46IGZ1bmN0aW9uIGlzQWRtaW4oc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VyID8gc3RhdGUudXNlci5pc0FkbWluIDogZmFsc2U7CiAgfSwKICBlcnJvcjogZnVuY3Rpb24gZXJyb3Ioc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5lcnJvcjsKICB9LAogIGxvYWRpbmc6IGZ1bmN0aW9uIGxvYWRpbmcoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5sb2FkaW5nOwogIH0sCiAgbG9nZ2VkSW46IGZ1bmN0aW9uIGxvZ2dlZEluKHN0YXRlKSB7CiAgICByZXR1cm4gISFzdGF0ZS51c2VyOwogIH0sCiAgZ3Vlc3Q6IGZ1bmN0aW9uIGd1ZXN0KCkgewogICAgdmFyIHN0b3JhZ2VJdGVtID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJndWVzdCIpOwogICAgaWYgKCFzdG9yYWdlSXRlbSkgcmV0dXJuIGZhbHNlOwogICAgaWYgKHN0b3JhZ2VJdGVtID09PSAiaXNHdWVzdCIpIHJldHVybiB0cnVlOwogICAgaWYgKHN0b3JhZ2VJdGVtID09PSAiaXNOb3RHdWVzdCIpIHJldHVybiBmYWxzZTsKICB9Cn07"},{"version":3,"sources":["/home/hoang/Manager-Village1/web/src/store/modules/Auth.js"],"names":["router","getError","AuthService","namespaced","state","user","loading","error","mutations","SET_USER","SET_LOADING","SET_ERROR","actions","logout","commit","dispatch","then","value","currentRoute","name","push","path","catch","getAuthUser","response","data","setGuest","context","window","localStorage","setItem","getters","authUser","isAdmin","loggedIn","guest","storageItem","getItem"],"mappings":"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","sourcesContent":["import router from \"@/router\";\nimport { getError } from \"@/utils/helpers\";\nimport AuthService from \"@/services/AuthService\";\n\nexport const namespaced = true;\n\nexport const state = {\n  user: null,\n  loading: false,\n  error: null,\n};\n\nexport const mutations = {\n  SET_USER(state, user) {\n    state.user = user;\n  },\n  SET_LOADING(state, loading) {\n    state.loading = loading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  },\n};\n\nexport const actions = {\n  logout({ commit, dispatch }) {\n    return AuthService.logout()\n      .then(() => {\n        commit(\"SET_USER\", null);\n        dispatch(\"setGuest\", { value: \"isGuest\" });\n        if (router.currentRoute.name !== \"login\")\n          router.push({ path: \"/login\" });\n      })\n      .catch((error) => {\n        commit(\"SET_ERROR\", getError(error));\n      });\n  },\n  async getAuthUser({ commit }) {\n    commit(\"SET_LOADING\", true);\n    try {\n      const response = await AuthService.getAuthUser();\n      commit(\"SET_USER\", response.data.data);\n      commit(\"SET_LOADING\", false);\n      return response.data.data;\n    } catch (error) {\n      commit(\"SET_LOADING\", false);\n      commit(\"SET_USER\", null);\n      commit(\"SET_ERROR\", getError(error));\n    }\n  },\n  setGuest(context, { value }) {\n    window.localStorage.setItem(\"guest\", value);\n  },\n};\n\nexport const getters = {\n  authUser: (state) => {\n    return state.user;\n  },\n  isAdmin: (state) => {\n    return state.user ? state.user.isAdmin : false;\n  },\n  error: (state) => {\n    return state.error;\n  },\n  loading: (state) => {\n    return state.loading;\n  },\n  loggedIn: (state) => {\n    return !!state.user;\n  },\n  guest: () => {\n    const storageItem = window.localStorage.getItem(\"guest\");\n    if (!storageItem) return false;\n    if (storageItem === \"isGuest\") return true;\n    if (storageItem === \"isNotGuest\") return false;\n  },\n};\n"]}]}