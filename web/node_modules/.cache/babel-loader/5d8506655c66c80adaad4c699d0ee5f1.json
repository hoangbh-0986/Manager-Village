{"remainingRequest":"/home/hoang/Manager-Village/web/node_modules/babel-loader/lib/index.js!/home/hoang/Manager-Village/web/node_modules/eslint-loader/index.js??ref--13-0!/home/hoang/Manager-Village/web/src/services/AuthService.js","dependencies":[{"path":"/home/hoang/Manager-Village/web/src/services/AuthService.js","mtime":1618137301683},{"path":"/home/hoang/Manager-Village/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hoang/Manager-Village/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hoang/Manager-Village/web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvaG9hbmcvTWFuYWdlci1WaWxsYWdlL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKZXhwb3J0IHZhciBhdXRoQ2xpZW50ID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkwsCiAgd2l0aENyZWRlbnRpYWxzOiB0cnVlIC8vIHJlcXVpcmVkIHRvIGhhbmRsZSB0aGUgQ1NSRiB0b2tlbgoKfSk7Ci8qCiAqIEFkZCBhIHJlc3BvbnNlIGludGVyY2VwdG9yCiAqLwoKYXV0aENsaWVudC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgaWYgKGVycm9yLnJlc3BvbnNlICYmIFs0MDEsIDQxOV0uaW5jbHVkZXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSAmJiBzdG9yZS5nZXR0ZXJzWyJhdXRoL2F1dGhVc2VyIl0gJiYgIXN0b3JlLmdldHRlcnNbImF1dGgvZ3Vlc3QiXSkgewogICAgc3RvcmUuZGlzcGF0Y2goImF1dGgvbG9nb3V0Iik7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGF1dGhDbGllbnQuZ2V0KCIvc2FuY3R1bS9jc3JmLWNvb2tpZSIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGF1dGhDbGllbnQucG9zdCgiL2xvZ2luIiwgcGF5bG9hZCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICByZXR1cm4gYXV0aENsaWVudC5wb3N0KCIvbG9nb3V0Iik7CiAgfSwKICBmb3Jnb3RQYXNzd29yZDogZnVuY3Rpb24gZm9yZ290UGFzc3dvcmQocGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBhdXRoQ2xpZW50LmdldCgiL3NhbmN0dW0vY3NyZi1jb29raWUiKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgYXV0aENsaWVudC5wb3N0KCIvZm9yZ290LXBhc3N3b3JkIiwgcGF5bG9hZCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICBnZXRBdXRoVXNlcjogZnVuY3Rpb24gZ2V0QXV0aFVzZXIoKSB7CiAgICByZXR1cm4gYXV0aENsaWVudC5nZXQoIi9hcGkvdXNlcnMvYXV0aCIpOwogIH0sCiAgcmVzZXRQYXNzd29yZDogZnVuY3Rpb24gcmVzZXRQYXNzd29yZChwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGF1dGhDbGllbnQuZ2V0KCIvc2FuY3R1bS9jc3JmLWNvb2tpZSIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBhdXRoQ2xpZW50LnBvc3QoIi9yZXNldC1wYXNzd29yZCIsIHBheWxvYWQpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgdXBkYXRlUGFzc3dvcmQ6IGZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkKHBheWxvYWQpIHsKICAgIHJldHVybiBhdXRoQ2xpZW50LnB1dCgiL3VzZXIvcGFzc3dvcmQiLCBwYXlsb2FkKTsKICB9LAogIHJlZ2lzdGVyVXNlcjogZnVuY3Rpb24gcmVnaXN0ZXJVc2VyKHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gYXV0aENsaWVudC5nZXQoIi9zYW5jdHVtL2NzcmYtY29va2llIik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIGF1dGhDbGllbnQucG9zdCgiL3JlZ2lzdGVyIiwgcGF5bG9hZCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQpOwogICAgfSkpKCk7CiAgfSwKICBzZW5kVmVyaWZpY2F0aW9uOiBmdW5jdGlvbiBzZW5kVmVyaWZpY2F0aW9uKHBheWxvYWQpIHsKICAgIHJldHVybiBhdXRoQ2xpZW50LnBvc3QoIi9lbWFpbC92ZXJpZmljYXRpb24tbm90aWZpY2F0aW9uIiwgcGF5bG9hZCk7CiAgfSwKICB1cGRhdGVVc2VyOiBmdW5jdGlvbiB1cGRhdGVVc2VyKHBheWxvYWQpIHsKICAgIHJldHVybiBhdXRoQ2xpZW50LnB1dCgiL3VzZXIvcHJvZmlsZS1pbmZvcm1hdGlvbiIsIHBheWxvYWQpOwogIH0KfTs="},{"version":3,"sources":["/home/hoang/Manager-Village/web/src/services/AuthService.js"],"names":["axios","store","authClient","create","baseURL","process","env","VUE_APP_API_URL","withCredentials","interceptors","response","use","error","includes","status","getters","dispatch","Promise","reject","login","payload","get","post","logout","forgotPassword","getAuthUser","resetPassword","updatePassword","put","registerUser","sendVerification","updateUser"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport store from \"@/store\";\n\nexport const authClient = axios.create({\n  baseURL: process.env.VUE_APP_API_URL,\n  withCredentials: true, // required to handle the CSRF token\n});\n\n/*\n * Add a response interceptor\n */\nauthClient.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  function (error) {\n    if (\n      error.response &&\n      [401, 419].includes(error.response.status) &&\n      store.getters[\"auth/authUser\"] &&\n      !store.getters[\"auth/guest\"]\n    ) {\n      store.dispatch(\"auth/logout\");\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default {\n  async login(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/login\", payload);\n  },\n  logout() {\n    return authClient.post(\"/logout\");\n  },\n  async forgotPassword(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/forgot-password\", payload);\n  },\n  getAuthUser() {\n    return authClient.get(\"/api/users/auth\");\n  },\n  async resetPassword(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/reset-password\", payload);\n  },\n  updatePassword(payload) {\n    return authClient.put(\"/user/password\", payload);\n  },\n  async registerUser(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/register\", payload);\n  },\n  sendVerification(payload) {\n    return authClient.post(\"/email/verification-notification\", payload);\n  },\n  updateUser(payload) {\n    return authClient.put(\"/user/profile-information\", payload);\n  },\n};\n"]}]}