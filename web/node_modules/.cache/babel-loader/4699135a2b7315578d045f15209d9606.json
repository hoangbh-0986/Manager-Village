{"remainingRequest":"/home/hoang/Manager-Village1/web/node_modules/babel-loader/lib/index.js!/home/hoang/Manager-Village1/web/node_modules/eslint-loader/index.js??ref--13-0!/home/hoang/Manager-Village1/web/src/services/AuthService.js","dependencies":[{"path":"/home/hoang/Manager-Village1/web/src/services/AuthService.js","mtime":1618137301683},{"path":"/home/hoang/Manager-Village1/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hoang/Manager-Village1/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hoang/Manager-Village1/web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvaG9hbmcvTWFuYWdlci1WaWxsYWdlMS93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmV4cG9ydCB2YXIgYXV0aENsaWVudCA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZSAvLyByZXF1aXJlZCB0byBoYW5kbGUgdGhlIENTUkYgdG9rZW4KCn0pOwovKgogKiBBZGQgYSByZXNwb25zZSBpbnRlcmNlcHRvcgogKi8KCmF1dGhDbGllbnQuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZSAmJiBbNDAxLCA0MTldLmluY2x1ZGVzKGVycm9yLnJlc3BvbnNlLnN0YXR1cykgJiYgc3RvcmUuZ2V0dGVyc1siYXV0aC9hdXRoVXNlciJdICYmICFzdG9yZS5nZXR0ZXJzWyJhdXRoL2d1ZXN0Il0pIHsKICAgIHN0b3JlLmRpc3BhdGNoKCJhdXRoL2xvZ291dCIpOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHsKICBsb2dpbjogZnVuY3Rpb24gbG9naW4ocGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBhdXRoQ2xpZW50LmdldCgiL3NhbmN0dW0vY3NyZi1jb29raWUiKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBhdXRoQ2xpZW50LnBvc3QoIi9sb2dpbiIsIHBheWxvYWQpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgcmV0dXJuIGF1dGhDbGllbnQucG9zdCgiL2xvZ291dCIpOwogIH0sCiAgZm9yZ290UGFzc3dvcmQ6IGZ1bmN0aW9uIGZvcmdvdFBhc3N3b3JkKHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gYXV0aENsaWVudC5nZXQoIi9zYW5jdHVtL2NzcmYtY29va2llIik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGF1dGhDbGllbnQucG9zdCgiL2ZvcmdvdC1wYXNzd29yZCIsIHBheWxvYWQpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgZ2V0QXV0aFVzZXI6IGZ1bmN0aW9uIGdldEF1dGhVc2VyKCkgewogICAgcmV0dXJuIGF1dGhDbGllbnQuZ2V0KCIvYXBpL3VzZXJzL2F1dGgiKTsKICB9LAogIHJlc2V0UGFzc3dvcmQ6IGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQocGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBhdXRoQ2xpZW50LmdldCgiL3NhbmN0dW0vY3NyZi1jb29raWUiKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgYXV0aENsaWVudC5wb3N0KCIvcmVzZXQtcGFzc3dvcmQiLCBwYXlsb2FkKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIHVwZGF0ZVBhc3N3b3JkOiBmdW5jdGlvbiB1cGRhdGVQYXNzd29yZChwYXlsb2FkKSB7CiAgICByZXR1cm4gYXV0aENsaWVudC5wdXQoIi91c2VyL3Bhc3N3b3JkIiwgcGF5bG9hZCk7CiAgfSwKICByZWdpc3RlclVzZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyVXNlcihwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGF1dGhDbGllbnQuZ2V0KCIvc2FuY3R1bS9jc3JmLWNvb2tpZSIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBhdXRoQ2xpZW50LnBvc3QoIi9yZWdpc3RlciIsIHBheWxvYWQpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKSgpOwogIH0sCiAgc2VuZFZlcmlmaWNhdGlvbjogZnVuY3Rpb24gc2VuZFZlcmlmaWNhdGlvbihwYXlsb2FkKSB7CiAgICByZXR1cm4gYXV0aENsaWVudC5wb3N0KCIvZW1haWwvdmVyaWZpY2F0aW9uLW5vdGlmaWNhdGlvbiIsIHBheWxvYWQpOwogIH0sCiAgdXBkYXRlVXNlcjogZnVuY3Rpb24gdXBkYXRlVXNlcihwYXlsb2FkKSB7CiAgICByZXR1cm4gYXV0aENsaWVudC5wdXQoIi91c2VyL3Byb2ZpbGUtaW5mb3JtYXRpb24iLCBwYXlsb2FkKTsKICB9Cn07"},{"version":3,"sources":["/home/hoang/Manager-Village1/web/src/services/AuthService.js"],"names":["axios","store","authClient","create","baseURL","process","env","VUE_APP_API_URL","withCredentials","interceptors","response","use","error","includes","status","getters","dispatch","Promise","reject","login","payload","get","post","logout","forgotPassword","getAuthUser","resetPassword","updatePassword","put","registerUser","sendVerification","updateUser"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport store from \"@/store\";\n\nexport const authClient = axios.create({\n  baseURL: process.env.VUE_APP_API_URL,\n  withCredentials: true, // required to handle the CSRF token\n});\n\n/*\n * Add a response interceptor\n */\nauthClient.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  function (error) {\n    if (\n      error.response &&\n      [401, 419].includes(error.response.status) &&\n      store.getters[\"auth/authUser\"] &&\n      !store.getters[\"auth/guest\"]\n    ) {\n      store.dispatch(\"auth/logout\");\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default {\n  async login(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/login\", payload);\n  },\n  logout() {\n    return authClient.post(\"/logout\");\n  },\n  async forgotPassword(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/forgot-password\", payload);\n  },\n  getAuthUser() {\n    return authClient.get(\"/api/users/auth\");\n  },\n  async resetPassword(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/reset-password\", payload);\n  },\n  updatePassword(payload) {\n    return authClient.put(\"/user/password\", payload);\n  },\n  async registerUser(payload) {\n    await authClient.get(\"/sanctum/csrf-cookie\");\n    return authClient.post(\"/register\", payload);\n  },\n  sendVerification(payload) {\n    return authClient.post(\"/email/verification-notification\", payload);\n  },\n  updateUser(payload) {\n    return authClient.put(\"/user/profile-information\", payload);\n  },\n};\n"]}]}