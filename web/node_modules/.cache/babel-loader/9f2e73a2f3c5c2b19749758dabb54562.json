{"remainingRequest":"/home/hoang/Manager-Village/web/node_modules/babel-loader/lib/index.js!/home/hoang/Manager-Village/web/node_modules/eslint-loader/index.js??ref--13-0!/home/hoang/Manager-Village/web/src/store/modules/Auth.js","dependencies":[{"path":"/home/hoang/Manager-Village/web/src/store/modules/Auth.js","mtime":1618134042079},{"path":"/home/hoang/Manager-Village/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hoang/Manager-Village/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hoang/Manager-Village/web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2hvYW5nL01hbmFnZXItVmlsbGFnZS93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKaW1wb3J0IHsgZ2V0RXJyb3IgfSBmcm9tICJAL3V0aWxzL2hlbHBlcnMiOwppbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9BdXRoU2VydmljZSI7CmV4cG9ydCB2YXIgbmFtZXNwYWNlZCA9IHRydWU7CmV4cG9ydCB2YXIgc3RhdGUgPSB7CiAgdXNlcjogbnVsbCwKICBsb2FkaW5nOiBmYWxzZSwKICBlcnJvcjogbnVsbAp9OwpleHBvcnQgdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfVVNFUjogZnVuY3Rpb24gU0VUX1VTRVIoc3RhdGUsIHVzZXIpIHsKICAgIHN0YXRlLnVzZXIgPSB1c2VyOwogIH0sCiAgU0VUX0xPQURJTkc6IGZ1bmN0aW9uIFNFVF9MT0FESU5HKHN0YXRlLCBsb2FkaW5nKSB7CiAgICBzdGF0ZS5sb2FkaW5nID0gbG9hZGluZzsKICB9LAogIFNFVF9FUlJPUjogZnVuY3Rpb24gU0VUX0VSUk9SKHN0YXRlLCBlcnJvcikgewogICAgc3RhdGUuZXJyb3IgPSBlcnJvcjsKICB9Cn07CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoOwogICAgcmV0dXJuIEF1dGhTZXJ2aWNlLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBjb21taXQoIlNFVF9VU0VSIiwgbnVsbCk7CiAgICAgIGRpc3BhdGNoKCJzZXRHdWVzdCIsIHsKICAgICAgICB2YWx1ZTogImlzR3Vlc3QiCiAgICAgIH0pOwogICAgICBpZiAocm91dGVyLmN1cnJlbnRSb3V0ZS5uYW1lICE9PSAibG9naW4iKSByb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9sb2dpbiIKICAgICAgfSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29tbWl0KCJTRVRfRVJST1IiLCBnZXRFcnJvcihlcnJvcikpOwogICAgfSk7CiAgfSwKICBnZXRBdXRoVXNlcjogZnVuY3Rpb24gZ2V0QXV0aFVzZXIoX3JlZjIpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIHJlc3BvbnNlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICAgICAgICAgIGNvbW1pdCgiU0VUX0xPQURJTkciLCB0cnVlKTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2UuZ2V0QXV0aFVzZXIoKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29tbWl0KCJTRVRfVVNFUiIsIHJlc3BvbnNlLmRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgY29tbWl0KCJTRVRfTE9BRElORyIsIGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5kYXRhLmRhdGEpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgICBjb21taXQoIlNFVF9MT0FESU5HIiwgZmFsc2UpOwogICAgICAgICAgICAgIGNvbW1pdCgiU0VUX1VTRVIiLCBudWxsKTsKICAgICAgICAgICAgICBjb21taXQoIlNFVF9FUlJPUiIsIGdldEVycm9yKF9jb250ZXh0LnQwKSk7CgogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDExXV0pOwogICAgfSkpKCk7CiAgfSwKICBzZXRHdWVzdDogZnVuY3Rpb24gc2V0R3Vlc3QoY29udGV4dCwgX3JlZjMpIHsKICAgIHZhciB2YWx1ZSA9IF9yZWYzLnZhbHVlOwogICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJndWVzdCIsIHZhbHVlKTsKICB9Cn07CmV4cG9ydCB2YXIgZ2V0dGVycyA9IHsKICBhdXRoVXNlcjogZnVuY3Rpb24gYXV0aFVzZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS51c2VyOwogIH0sCiAgaXNBZG1pbjogZnVuY3Rpb24gaXNBZG1pbihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXIgPyBzdGF0ZS51c2VyLmlzQWRtaW4gOiBmYWxzZTsKICB9LAogIGVycm9yOiBmdW5jdGlvbiBlcnJvcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmVycm9yOwogIH0sCiAgbG9hZGluZzogZnVuY3Rpb24gbG9hZGluZyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmxvYWRpbmc7CiAgfSwKICBsb2dnZWRJbjogZnVuY3Rpb24gbG9nZ2VkSW4oc3RhdGUpIHsKICAgIHJldHVybiAhIXN0YXRlLnVzZXI7CiAgfSwKICBndWVzdDogZnVuY3Rpb24gZ3Vlc3QoKSB7CiAgICB2YXIgc3RvcmFnZUl0ZW0gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oImd1ZXN0Iik7CiAgICBpZiAoIXN0b3JhZ2VJdGVtKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoc3RvcmFnZUl0ZW0gPT09ICJpc0d1ZXN0IikgcmV0dXJuIHRydWU7CiAgICBpZiAoc3RvcmFnZUl0ZW0gPT09ICJpc05vdEd1ZXN0IikgcmV0dXJuIGZhbHNlOwogIH0KfTs="},{"version":3,"sources":["/home/hoang/Manager-Village/web/src/store/modules/Auth.js"],"names":["router","getError","AuthService","namespaced","state","user","loading","error","mutations","SET_USER","SET_LOADING","SET_ERROR","actions","logout","commit","dispatch","then","value","currentRoute","name","push","path","catch","getAuthUser","response","data","setGuest","context","window","localStorage","setItem","getters","authUser","isAdmin","loggedIn","guest","storageItem","getItem"],"mappings":"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","sourcesContent":["import router from \"@/router\";\nimport { getError } from \"@/utils/helpers\";\nimport AuthService from \"@/services/AuthService\";\n\nexport const namespaced = true;\n\nexport const state = {\n  user: null,\n  loading: false,\n  error: null,\n};\n\nexport const mutations = {\n  SET_USER(state, user) {\n    state.user = user;\n  },\n  SET_LOADING(state, loading) {\n    state.loading = loading;\n  },\n  SET_ERROR(state, error) {\n    state.error = error;\n  },\n};\n\nexport const actions = {\n  logout({ commit, dispatch }) {\n    return AuthService.logout()\n      .then(() => {\n        commit(\"SET_USER\", null);\n        dispatch(\"setGuest\", { value: \"isGuest\" });\n        if (router.currentRoute.name !== \"login\")\n          router.push({ path: \"/login\" });\n      })\n      .catch((error) => {\n        commit(\"SET_ERROR\", getError(error));\n      });\n  },\n  async getAuthUser({ commit }) {\n    commit(\"SET_LOADING\", true);\n    try {\n      const response = await AuthService.getAuthUser();\n      commit(\"SET_USER\", response.data.data);\n      commit(\"SET_LOADING\", false);\n      return response.data.data;\n    } catch (error) {\n      commit(\"SET_LOADING\", false);\n      commit(\"SET_USER\", null);\n      commit(\"SET_ERROR\", getError(error));\n    }\n  },\n  setGuest(context, { value }) {\n    window.localStorage.setItem(\"guest\", value);\n  },\n};\n\nexport const getters = {\n  authUser: (state) => {\n    return state.user;\n  },\n  isAdmin: (state) => {\n    return state.user ? state.user.isAdmin : false;\n  },\n  error: (state) => {\n    return state.error;\n  },\n  loading: (state) => {\n    return state.loading;\n  },\n  loggedIn: (state) => {\n    return !!state.user;\n  },\n  guest: () => {\n    const storageItem = window.localStorage.getItem(\"guest\");\n    if (!storageItem) return false;\n    if (storageItem === \"isGuest\") return true;\n    if (storageItem === \"isNotGuest\") return false;\n  },\n};\n"]}]}